<script>{(js/jscolor.js)}</script>
<style>{(css/speededitor.css)}</style>
<script>

	function changeRepeatPressActionUntilReleased() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "changeRepeatPressActionUntilReleased",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					value: document.getElementById("repeatPressActionUntilReleased").checked,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function examples() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "examples",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function copyControlToAllBanks() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "copyControlToAllBanks",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function resetControl() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "resetControl",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function selectFont() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "selectFont",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateFontSize() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateFontSize",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					value: document.getElementById("fontSize").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateFontColor() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateFontColor",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					value: document.getElementById('fontColor').jscolor.toString(),
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateIconLabel() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateIconLabel",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					value: document.getElementById('iconLabel').value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function iconHistory() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "iconHistory",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearIcon() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "clearIcon",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function selectButton(buttonType) {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateAction",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					buttonType: buttonType,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearButton(buttonType) {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "clearAction",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					buttonType: buttonType,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function editSnippet(actionType) {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "editSnippet",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					actionType: actionType,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function setIcon(encodedIcon) {
		if (encodedIcon != "") {
			document.getElementById("iconDropZonePreview").innerHTML = "<img src='" + encodedIcon + "'>";
    		document.getElementById("iconDropZone").className = "dropzone dropped";
    	} else {
			document.getElementById("iconDropZonePreview").innerHTML = "<p style=\"padding-top: 13px;\">icon</p>";
			document.getElementById("iconDropZone").className = "dropzone";
    	}
	}

	function pressIconDropZone() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "iconClicked",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeIconDropZone(element) {
		var file = element.files[0];

		element.classList.remove("hover");

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "{{ id }}",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		element.classList.add("dropped");

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;
			document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';

			// Icon Callback:
			try {
				var result = {
					id: "{{ id }}",
					params: {
						type: "updateIcon",
                        device: document.getElementById("device").value,
                        unit: document.getElementById("unit").value,
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						icon: data,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

			// Reset the drop zone:
			element.value = "";

		};
	}

	function changeFontColor(value) {
		document.getElementById('fontColor').jscolor.fromString(value);
	}

	function changeImage(id, data) {
		document.getElementById(id).getElementsByTagName('img')[0].src = data;
	}

	function updateUI() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateUI",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeDeviceUnitApplicationBank() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "changeDeviceUnitApplicationBank",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeBankLabel() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "changeBankLabel",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					bankLabel: document.getElementById("bankLabel").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clickButton(callbackType, button) {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: callbackType,
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					button: button,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeDropZone(button, element) {
		var file = element.files[0];

		element.classList.remove("hover");

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "{{ id }}",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		element.classList.add("dropped");

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;
			document.getElementById("dropzone" + button + "_preview").innerHTML = '<img src="' + data + '" />';

			// Icon Callback:
			try {
				var result = {
					id: "{{ id }}",
					params: {
						type: "updateIcon",
						device: document.getElementById("device").value,
						unit: document.getElementById("unit").value,
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						button: button,
						icon: data,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function changeIgnore() {
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "changeIgnore",
					device: document.getElementById("device").value,
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					ignore: document.getElementById("ignore").checked,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function showContextMenu(ev) {
		ev.preventDefault();
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "showContextMenu",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					button: ev.srcElement.getAttribute("button"),
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
		return false;
	}

	function allowDrop(ev) {
		ev.dataTransfer.dropEffect = "copy";
		ev.preventDefault();
	}

	function drag(ev) {
		ev.dataTransfer.setData("button", ev.target.getAttribute("button"));
	}

	function drop(ev) {

		ev.preventDefault();

		var button = ev.toElement.getAttribute("button");

		var dt = ev.dataTransfer
	    var files = dt.files
		var file = files[0]

	    if (file) {
	    	if (["image/png", "image/gif", "image/jpeg", "image/tiff"].indexOf(file.type) >= 0) {
				var reader = new FileReader(file);
				reader.readAsDataURL(file);

				reader.onload = function(e) {
					var data = e.target.result;

					// Icon Callback:
					try {
						var result = {
							id: "{{ id }}",
							params: {
								type: "updateIcon",
                                device: document.getElementById("device").value,
                                unit: document.getElementById("unit").value,
								application: document.getElementById("application").value,
								bank: document.getElementById("bank").value,
								button: button,
								icon: data,
							},
						}
						postMessage(result);
					} catch(err) {
						alertErrorMessage(err);
					}

				};


	    	} else {
				// File type dropped doesn't match the accepted list:
				try {
					var result = {
						id: "{{ id }}",
						params: {
							type: "badExtension",
						},
					}
					postMessage(result);
				} catch(err) {
					alertErrorMessage(err);
				}
				return;
	    	}
	    }
	    else {
			try {
				var result = {
					id: "{{ id }}",
					params: {
						type: "dropAndDrop",
                        device: document.getElementById("device").value,
                        unit: document.getElementById("unit").value,
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						source: ev.dataTransfer.getData("button"),
						destination: button,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
		}
	}

	function changeControl(element) {
		// -------------------------------------------------
		// UPDATE LABEL UI:
		// -------------------------------------------------
		try {
			var result = {
				id: "{{ id }}",
				params: {
					type: "updateUI",
					device: element.getAttribute("device"),
					unit: document.getElementById("unit").value,
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					button: element.getAttribute("button"),
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}
</script>

<table>
	<tr>
		<th style="height: 10px;"></th>
	</tr>
	<tr>
		<th style="width: 10px;"></th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('importSettings')">{{ i18n("importSettings") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('exportSettings')">{{ i18n("exportSettings") }}</a>
		</th>
		<th>
	</tr>
</table>

<hr />

<table style="text-align: left; vertical-align: text-bottom; padding-top: 10px; padding-left: 20px;">
	<tr>
		<th style="width: 67px;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("device") }}: </span>
		</th>
		<th style="width: 250px;">
			<select id="device" style="width: 250px;" onchange="changeDeviceUnitApplicationBank()">
				<option value="Original" {{ lastDevice == "Original" and "selected" or ""}}>Stream Deck</option>
				<option value="XL" {{ lastDevice == "XL" and "selected" or ""}}>Stream Deck XL</option>
				<option value="Mini" {{ lastDevice == "Mini" and "selected" or ""}}>Stream Deck Mini</option>
			</select>
		</th>
	</tr>
</table>

<table style="width: 1000px; text-align: left; vertical-align: text-bottom; padding-top: 10px; padding-left: 20px;">
	<tr>
		<th style=text-align: left;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("unit") }}: </span>
				<select id="unit" style="width: 35px;" onchange="changeDeviceUnitApplicationBank()">
					{%
					for i=1, numberOfDevices do
					%}
					<option value="{{i}}" {{ lastUnit == tostring(i) and "selected" or ""}}>{{i}}</option>
					{% end %}
				</select>
			</span>
		</th>
		<th style=text-align: left;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("application") }}: </span>
				<select id="application" style="width: 250px;" onchange="changeDeviceUnitApplicationBank()">
					<option value="All Applications">{{ i18n("unlistedAndIgnoredApplications") }}</option>
					<option disabled>──────────</option>
					{%
					for id, label in spairs(builtInApps, function(t,a,b) return t[a] < t[b] end) do
						local selected = ""
						if lastApplication == id then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{id}}">{{label}}</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					local atLeastOne = false
					for id, label in spairs(userApps, function(t,a,b) return t[a] < t[b] end) do
						atLeastOne = true
						local selected = ""
						if lastApplication == id then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{id}}">{{label}}</option>
					{%
					end
					if atLeastOne then
					%}
					<option disabled>──────────</option>
					{%
					end
					%}
					<option value="Add Application">{{ i18n("addApplication") }}</option>
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("bank") }}: </span>
				<select id="bank" style="width: 100px;" onchange="changeDeviceUnitApplicationBank()">
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}">{{i}}</option>
					{% end %}
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px; padding-left:5px;">{{ i18n("label") }}: </span>
			<input type="text" id="bankLabel" class="speedEditorLabel" value="{{ lastBankLabel }}" onchange="updateBankLabel()" placeholder="{{ i18n("none") }}">
		</th>
		<th style="padding-left: 20px; width: 200px; vertical-align:bottom;">
			<span id="ignoreApp">
				<input type="checkbox" value="ignore" id="ignore" onchange="changeIgnore()">
		  		<label for="ignore"> <span style="font-weight:normal; font-size:13px; padding-left:5px;">{{ i18n("ignoreApplication") }}</span></label>
	  		</span>
		</th>
	</tr>
</table>

<table>
	<thead>
		<tr>
			<th width="458px" style="text-align: center";>
				<table cellspacing="10" id="speededitorOriginalUI">
					<tr>
						<td device="Original" button="1" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="2" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="3" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="4" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="5" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="Original" button="6" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="7" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="8" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="9" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="10" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="Original" button="11" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="12" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="13" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="14" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Original" button="15" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
				</table>

				<table cellspacing="10" id="speededitorMiniUI">
					<tr>
						<td device="Mini" button="1" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Mini" button="2" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Mini" button="3" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="Mini" button="4" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Mini" button="5" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="Mini" button="6" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
				</table>

				<table cellspacing="10" id="speededitorXLUI">
					<tr>
						<td device="XL" button="1" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="2" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="3" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="4" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="5" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="6" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="7" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="8" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="XL" button="9" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="10" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="11" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="12" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="13" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="14" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="15" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="16" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="XL" button="17" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="18" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="19" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="20" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="21" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="22" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="23" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="24" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
					<tr>
						<td device="XL" button="25" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="26" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="27" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="28" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="29" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="30" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="31" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
						<td device="XL" button="32" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="changeControl(this)" oncontextmenu="showContextMenu(event)"></td>
					</tr>
				</table>
			</th>
			<th style="text-align:top; padding-top: 20px;">
				<p style="text-align: left; padding-left:20px; font-size:16px; margin: 0px;">
					<strong>{{ i18n("selectedControl") }}:</strong> <span id="label" style="font-weight: normal;"></span>
				</p>
				<div id="speedEditorGroupControls" class="uiItem">
					<table class="speedEditor" style="height: 450px;">

						<!-- PRESS & RELEASE ACTION: -->
						<tr>
							<th width="229px">{{ i18n("pressAction") }}:</th>
							<th width="229px">{{ i18n("releaseAction") }}:</th>
						</tr>
						<tr>
							<td width="229px"><input type="text" id="press_action" class="speedEditorActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="release_action" class="speedEditorActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr>
							<td width="229px"><a id="press_actionButton" href="#" class="button speedEditorActionButton" onclick="selectButton('pressAction')">{{ i18n("select") }}</a> <a id="press_clearButton" href="#" class="button speedEditorActionButton" onclick="clearButton('pressAction')">{{ i18n("clear") }}</a> <a href="#" class="button speedEditorActionButton" onclick="editSnippet('pressAction')">{{ i18n("editSnippet") }}</a></td>
							<td width="229px"><a id="release_actionButton" href="#" class="button speedEditorActionButton" onclick="selectButton('releaseAction')">{{ i18n("select") }}</a> <a id="release_clearButton" href="#" class="button speedEditorActionButton" onclick="clearButton('releaseAction')">{{ i18n("clear") }}</a> <a href="#" class="button speedEditorActionButton" onclick="editSnippet('releaseAction')">{{ i18n("editSnippet") }}</a></td>
						</tr>

						<!-- PRESS REPEAT: -->
						<tr>
							<td width="458px">
								<input type="checkbox" value="true" id="repeatPressActionUntilReleased" onchange="changeRepeatPressActionUntilReleased()">
								<label for="repeatPressActionUntilReleased"><span style="font-weight:normal; font-size:10px; padding-left:5px;">{{ i18n("repeatPressActionUntilReleased") }}</span></label>
							</td>
						</tr>

						<!-- SPACER: -->
						<tr>
							<td>
								</br>
							</td>
						</tr>

						<!-- ICON: -->
						<tr id="iconA">
							<th width="229px">{{ i18n("imageDropZone") }}:</th>
							<th width="229px" id="iconLabelHeading">{{ i18n("textLabel") }}:</th>
						</tr>
						<tr id="iconB">
							<td width="229px">
								<div id="iconDropZone" class="dropzone{{ class }}" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
									<div id="iconDropZonePreview" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
										<p style="padding-top: 13px;">icon</p>
									</div>
									<input id="iconDropZoneInput" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconDropZone(this)" onclick="pressIconDropZone()" />
								</div>
							</td>
							<td width="229px" style="vertical-align: top;" id="iconLabelB">
								<textarea id="iconLabel" class="speedEditorActionTextbox" style="height: 60px; resize: none;" rows="5" cols="5" placeholder="{{ i18n("none") }}" onkeyup="updateIconLabel()" onchange="updateIconLabel()"></textarea><br />
								<a href="#" style="display: inline !important" class="button speedEditorActionButton" onclick="selectFont()">{{ i18n("selectFont") }}</a>
								<select id="fontSize" style="width: 55px;" onchange="updateFontSize()">
									{%
									for i=1, 200 do
									%}
									<option value="{{i}}">{{i}}px</option>
									{%
									end
									%}
								</select><input style="width: 53px;" id="fontColor" class="speedEditorActionTextbox jscolor {hash:false, borderColor:'#FFF', insetColor:'#FFF', backgroundColor:'#666'}" onchange="updateFontColor()" value="">
							</td>
						</tr>
						<tr id="iconC">
							<th width="229px" id="buttonResolution">
								<a href="#" class="button speedEditorActionButton" onclick="iconHistory()">{{ i18n("history") }}</a> <a href="#" class="button speedEditorActionButton" onclick="clearIcon()">{{ i18n("clear") }}</a>
							</th>
						</tr>

						<!-- SPACER: -->
						<tr>
							<td>
								</br>
							</td>
						</tr>

						<!-- USE SNIPPET TO GENERATE ICON: -->
						<tr>
							<th width="229px">{{ i18n("useSnippetToGenerateIcon") }}:</th>
						</tr>
						<tr>
							<td width="229px"><input type="text" id="snippet_action" class="speedEditorActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr>
							<td width="229px"><a href="#" class="button speedEditorActionButton" onclick="selectButton('snippetAction')">{{ i18n("select") }}</a> <a href="#" class="button speedEditorActionButton" onclick="clearButton('snippetAction')">{{ i18n("clear") }}</a> <a href="#" class="button speedEditorActionButton" onclick="editSnippet('snippetAction')">{{ i18n("editSnippet") }}</a> <a href="#" class="button speedEditorActionButton" onclick="examples()">{{ i18n("examples") }}</a></td>
						</tr>

						<!-- COPY CONTROL TO ALL BANKS & RESET CONTROL -->
						<tr style="padding-top: 10px;">
							<th>
								<a href="#" class="bottomButton" onclick="copyControlToAllBanks()" style="width: 180px;">{{ i18n("copyControlToAllBanks") }}</a>
							</th>
							<th>
								<a href="#" class="bottomButton" onclick="resetControl()" style="width: 180px;">{{ i18n("resetControl") }}</a>
							</th>
						</tr>

					</table>
				</div>

			</th>
		</tr>
	</thead>
</table>

<table>
	<tr>
		<th style="height: 10px;"></th>
	</tr>
	<tr>
		<th style="width: 10px;"></th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('resetEverything')">{{ i18n("resetEverything") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('resetDevice')">{{ i18n("resetDevice") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('resetUnit')">{{ i18n("resetUnit") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('resetApplication')">{{ i18n("resetApplication") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('resetBank')">{{ i18n("resetBank") }}</a>
		</th>
	</tr>
	<tr>
		<th style="width: 10px;"></th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('copyDevice')">{{ i18n("copyDevice") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('copyUnit')">{{ i18n("copyUnit") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('copyApplication')">{{ i18n("copyApplication") }}</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="clickButton('copyBank')">{{ i18n("copyBank") }}</a>
		</th>
	</tr>
</table>

<script>
	// Update UI on initial load:
	updateUI();
</script>