<script>{(js/jscolor.js)}</script>
<style>{(css/loupedeck.css)}</style>
<script>
	function changeColor(value) {
		document.getElementById('color').jscolor.fromString(value);
	}

	function changeImage(id, data) {
		document.getElementById(id).getElementsByTagName('img')[0].src = data;
	}

	function updateApplicationAndBank() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateApplicationAndBank",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function iconHistory() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "iconHistory",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('color').jscolor.toString(),
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearIcon() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "clearIcon",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateBankLabel() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateBankLabel",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					bankLabel: document.getElementById("bankLabel").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeControl(label, controlType, id) {
		document.getElementById("label").innerHTML = label;

		// -------------------------------------------------
		// KNOB:
		// -------------------------------------------------
		if (controlType == "knob") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "block";

			document.getElementById("knobA").style.display = "table";
			document.getElementById("knobB").style.display = "table";
			document.getElementById("knobC").style.display = "table";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("iconLabel").style.display = "block";
			document.getElementById("iconLabelHeading").style.display = "table-cell";

			document.getElementById("buttonResolution").style.display = "none";
			document.getElementById("sideResolution").style.display = "none";
			document.getElementById("wheelResolution").style.display = "none";
			document.getElementById("knobResolution").style.display = "block";

			document.getElementById("vibrateA").style.display = "none";
			document.getElementById("vibrateB").style.display = "none";
		}

		// -------------------------------------------------
		// TOUCH BUTTON:
		// -------------------------------------------------
		if (controlType == "touchButton") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "block";
			document.getElementById("sideResolution").style.display = "none";
			document.getElementById("wheelResolution").style.display = "none";
			document.getElementById("knobResolution").style.display = "none";

			document.getElementById("iconLabel").style.display = "block";
			document.getElementById("iconLabelHeading").style.display = "table-cell";

			document.getElementById("vibrateA").style.display = "block";
			document.getElementById("vibrateB").style.display = "block";
		}

		// -------------------------------------------------
		// LED BUTTON:
		// -------------------------------------------------
		if (controlType == "ledButton") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "none";
			document.getElementById("iconB").style.display = "none";
			document.getElementById("iconC").style.display = "none";

			document.getElementById("ledColorA").style.display = "block";
			document.getElementById("ledColorB").style.display = "block";

			document.getElementById("iconLabel").style.display = "none";
			document.getElementById("iconLabelHeading").style.display = "none";

			document.getElementById("vibrateA").style.display = "none";
			document.getElementById("vibrateB").style.display = "none";
		}

		// -------------------------------------------------
		// LEFT/RIGHT SCREENS:
		// -------------------------------------------------
		if (controlType == "sideScreen") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "block";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "block";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "block";
			document.getElementById("touchWheelB").style.display = "block";
			document.getElementById("touchWheelC").style.display = "block";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";

			document.getElementById("touchWheelG").style.display = "block";
			document.getElementById("touchWheelH").style.display = "block";
			document.getElementById("touchWheelI").style.display = "block";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "none";
			document.getElementById("sideResolution").style.display = "block";
			document.getElementById("wheelResolution").style.display = "none";
			document.getElementById("knobResolution").style.display = "none";

			document.getElementById("iconLabel").style.display = "none";
			document.getElementById("iconLabelHeading").style.display = "none";

			document.getElementById("vibrateA").style.display = "none";
			document.getElementById("vibrateB").style.display = "none";
		}

		// -------------------------------------------------
		// JOG WHEEL:
		// -------------------------------------------------
		if (controlType == "jogWheel") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "table";
			document.getElementById("knobB").style.display = "table";
			document.getElementById("knobC").style.display = "table";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "none";
			document.getElementById("iconB").style.display = "none";
			document.getElementById("iconC").style.display = "none";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("iconLabel").style.display = "none";
			document.getElementById("iconLabelHeading").style.display = "none";

			document.getElementById("vibrateA").style.display = "none";
			document.getElementById("vibrateB").style.display = "none";
		}

		// -------------------------------------------------
		// WHEEL SCREEN:
		// -------------------------------------------------
		if (controlType == "wheelScreen") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "block";
			document.getElementById("spacerD").style.display = "block";
			document.getElementById("spacerE").style.display = "block";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "block";
			document.getElementById("touchWheelB").style.display = "block";
			document.getElementById("touchWheelC").style.display = "block";
			document.getElementById("touchWheelD").style.display = "block";
			document.getElementById("touchWheelE").style.display = "block";
			document.getElementById("touchWheelF").style.display = "block";
			document.getElementById("touchWheelG").style.display = "block";
			document.getElementById("touchWheelH").style.display = "block";
			document.getElementById("touchWheelI").style.display = "block";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "none";
			document.getElementById("sideResolution").style.display = "none";
			document.getElementById("wheelResolution").style.display = "block";
			document.getElementById("knobResolution").style.display = "none";

			document.getElementById("iconLabel").style.display = "none";
			document.getElementById("iconLabelHeading").style.display = "none";

			document.getElementById("vibrateA").style.display = "none";
			document.getElementById("vibrateB").style.display = "none";
		}

		// -------------------------------------------------
		// Save the selectedControl & ID in a hidden field:
		// -------------------------------------------------
		document.getElementById("selectedControl").value = label;
		document.getElementById("id").value = id;
		document.getElementById("controlType").value = controlType;

		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateUI",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					controlType: controlType,
					id: id,
					selectedControl: label,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateColor() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateColor",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('color').jscolor.toString(),
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateIconLabel() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateIconLabel",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('iconLabel').value,
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function selectButton(buttonType) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateAction",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					id: document.getElementById("id").value,
					buttonType: buttonType,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearButton(buttonType) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "clearAction",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					buttonType: buttonType,
					controlType: document.getElementById("controlType").value,
					id: document.getElementById("id").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function setIcon(encodedIcon) {
		if (encodedIcon != "") {
			document.getElementById("iconDropZonePreview").innerHTML = "<img src='" + encodedIcon + "'>";
    		document.getElementById("iconDropZone").className = "dropzone dropped";
    	} else {
			document.getElementById("iconDropZonePreview").innerHTML = "<p style=\"padding-top: 13px;\">icon</p>";
			document.getElementById("iconDropZone").className = "dropzone";
    	}
	}

	function pressIconDropZone(groupID, buttonID) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "iconClicked",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					controlType: document.getElementById("controlType").value,
					id: document.getElementById("id").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeIconDropZone(element) {
		var file = element.files[0];

		element.classList.remove("hover");

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		element.classList.add("dropped");

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;
			document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						selectedControl: document.getElementById("selectedControl").value,
						controlType: document.getElementById("controlType").value,
						id: document.getElementById("id").value,
						icon: data,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function changeIconButtonDropZone(element, id) {
		var file = element.files[0];

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;

			// Change button icon:
			element.parentElement.getElementsByTagName("img")[0].src = data;

			// If this button is currently selected, change that too:
			if (document.getElementById("controlType").value == "touchButton" && document.getElementById("id").value == id) {
				document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';
				document.getElementById("iconDropZone").className = "dropzone dropped";
			}

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateButtonIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						id: id,
						icon: data,
						controlType: document.getElementById("controlType").value,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function changeIconKnobDropZone(element, id) {
		var file = element.files[0];

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;

			// Change button icon:
			//element.parentElement.getElementsByTagName("img")[0].src = data;

			// If this button is currently selected, change that too:
			if (document.getElementById("controlType").value == "knob" && document.getElementById("id").value == id) {
				document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';
				document.getElementById("iconDropZone").className = "dropzone dropped";
			}

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateKnobIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						id: id,
						icon: data,
						controlType: document.getElementById("controlType").value,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function changeIconScreenDropZone(element, id) {
		var file = element.files[0];

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;

			// If this button is currently selected, change that too:
			if (document.getElementById("controlType").value == "sideScreen" && document.getElementById("id").value == id) {
				document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';
				document.getElementById("iconDropZone").className = "dropzone dropped";
			}

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateButtonIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						id: id,
						icon: data,
						controlType: document.getElementById("controlType").value,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function changeIconWheelScreenDropZone(element, id) {
		var file = element.files[0];

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;

			// If this button is currently selected, change that too:
			if (document.getElementById("controlType").value == "wheelScreen" && document.getElementById("id").value == id) {
				document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';
				document.getElementById("iconDropZone").className = "dropzone dropped";
			}

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateButtonIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						id: id,
						icon: data,
						controlType: document.getElementById("controlType").value,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function importSettings() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "importSettings",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function exportSettings() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "exportSettings",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function copyControlToAllBanks() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "copyControlToAllBanks",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function resetControl() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "resetControl",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function resetEverything() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "resetEverything",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function resetApplication() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "resetApplication",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function resetBank() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "resetBank",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function copyApplication() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "copyApplication",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function copyBank() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "copyBank",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateVibrate() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateVibrate",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
					value: document.getElementById("vibrate").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}
</script>
<table>
	<thead>
		<tr>
			<th style="padding-left: 20px;">
				<a class="button importSettings" href="#" style="font-weight: normal;" onclick="importSettings()">Import Settings</a>
			</th>
			<th style="padding-left: 10px;">
				<a class="button importSettings" href="#" style="font-weight: normal;" onclick="exportSettings()">Export Settings</a>
			</th>
		</tr>
	</thead>
</table>
<hr />
<table style="width: 700px; text-align: left; vertical-align: text-bottom; padding-top: 10px; padding-left: 20px">
	<tr>
		<th style=text-align: left;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("application") }}: </span>
				<select id="application" style="width: 150px;" onchange="updateApplicationAndBank()">
					<option value="All Applications">All Applications</option>
					<option dttisabled>──────────</option>
					{%
					for id, label in spairs(builtInApps, function(t,a,b) return t[a] < t[b] end) do
						local selected = ""
						if lastApplication == id then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{id}}">{{label}}</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					local atLeastOne = false
					for id, label in spairs(userApps, function(t,a,b) return t[a] < t[b] end) do
						atLeastOne = true
						local selected = ""
						if lastApplication == id then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{id}}">{{label}}</option>
					{%
					end
					if atLeastOne then
					%}
					<option disabled>──────────</option>
					{%
					end
					%}
					<option value="Add Application">Add Application</option>
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("bank") }}: </span>
				<select id="bank" style="width: 100px;" onchange="updateApplicationAndBank()">
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}">{{i}}</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) .. "_LeftFn" then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}_LeftFn">{{i}} (Left Fn)</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) .. "_RightFn" then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}_RightFn">{{i}} (Right Fn)</option>
					{% end %}
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px; padding-left:5px;">{{ i18n("label") }}: </span>
			<input type="text" id="bankLabel" class="loupedeckLabel" value="{{ lastBankLabel }}" onchange="updateBankLabel()" placeholder="{{ i18n("none") }}">
		</th>
	</tr>
</table>
<table>
	<thead>
		<tr>
			<th width="447px">
				<div id="loupedeckCT">
					<div id="knob1">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '1')" onclick="changeControl('Knob 1', 'knob', '1');" />
						<img src="{{ insertImage('images/knob1.png') }}" width="39" height="39" onclick="changeControl('Knob 1', 'knob', '1');" />
					</div>
					<div id="knob4">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '4')" onclick="changeControl('Knob 4', 'knob', '4');" />
						<img src="{{ insertImage('images/knob4.png') }}" width="39" height="39" onclick="changeControl('Knob 4', 'knob', '4');" />
					</div>
					<div id="sideScreen1">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconScreenDropZone(this, '1')" onclick="changeControl('Left Screen', 'sideScreen', '1');" />
						<img src="{{ insertImage('images/sideScreen1.png') }}" width="24" height="131" style="object-fit: cover;" onclick="changeControl('Left Screen', 'sideScreen', '1');" />
					</div>
					<div id="touchButton1">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '1')" onclick="changeControl('Button 1', 'touchButton', '1');" />
						<img src="{{ insertImage('images/touchButton1.png') }}" width="40" height="40" onclick="changeControl('Button 1', 'touchButton', '1');" />
					</div>
					<div id="touchButton2">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '2')" onclick="changeControl('Button 2', 'touchButton', '2');" />
						<img src="{{ insertImage('images/touchButton2.png') }}" width="40" height="40" onclick="changeControl('Button 2', 'touchButton', '2');" />
					</div>
					<div id="touchButton3">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '3')" onclick="changeControl('Button 3', 'touchButton', '3');" />
						<img src="{{ insertImage('images/touchButton3.png') }}" width="40" height="40" onclick="changeControl('Button 3', 'touchButton', '3');" />
					</div>
					<div id="touchButton4">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '4')" onclick="changeControl('Button 4', 'touchButton', '4');" />
						<img src="{{ insertImage('images/touchButton4.png') }}" width="40" height="40" onclick="changeControl('Button 4', 'touchButton', '4');" />
					</div>
					<div id="sideScreen2">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconScreenDropZone(this, '2')" onclick="changeControl('Right Screen', 'sideScreen', '2');" />
						<img src="{{ insertImage('images/sideScreen2.png') }}" width="24" height="131" style="object-fit: cover;" onclick="changeControl('Right Screen', 'sideScreen', '2');" />
					</div>
					<div id="touchButton5">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '5')" onclick="changeControl('Button 5', 'touchButton', '5');" />
						<img src="{{ insertImage('images/touchButton5.png') }}" width="40" height="40" onclick="changeControl('Button 5', 'touchButton', '5');" />
					</div>
					<div id="touchButton6">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '6')" onclick="changeControl('Button 6', 'touchButton', '6');" />
						<img src="{{ insertImage('images/touchButton6.png') }}" width="40" height="40" onclick="changeControl('Button 6', 'touchButton', '6');" />
					</div>
					<div id="touchButton7">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '7')" onclick="changeControl('Button 7', 'touchButton', '7');" />
						<img src="{{ insertImage('images/touchButton7.png') }}" width="40" height="40" onclick="changeControl('Button 7', 'touchButton', '7');" />
					</div>
					<div id="touchButton8">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '8')" onclick="changeControl('Button 8', 'touchButton', '8');" />
						<img src="{{ insertImage('images/touchButton8.png') }}" width="40" height="40" onclick="changeControl('Button 8', 'touchButton', '8');" />
					</div>
					<div id="knob2">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '2')" onclick="changeControl('Knob 2', 'knob', '2');" />
						<img src="{{ insertImage('images/knob2.png') }}" width="39" height="38" onclick="changeControl('Knob 2', 'knob', '2');" />
					</div>
					<div id="knob5">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '5')" onclick="changeControl('Knob 5', 'knob', '5');" />
						<img src="{{ insertImage('images/knob5.png') }}" width="39" height="38" onclick="changeControl('Knob 5', 'knob', '5');" />
					</div>
					<div id="touchButton9">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '9')" onclick="changeControl('Button 9', 'touchButton', '9');" />
						<img src="{{ insertImage('images/touchButton9.png') }}" width="40" height="40" onclick="changeControl('Button 9', 'touchButton', '9');" />
					</div>
					<div id="touchButton10">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '10')" onclick="changeControl('Button 10', 'touchButton', '10');" />
						<img src="{{ insertImage('images/touchButton10.png') }}" width="40" height="40" onclick="changeControl('Button 10', 'touchButton', '10');" />
					</div>
					<div id="touchButton11">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '11')" onclick="changeControl('Button 11', 'touchButton', '11');" />
						<img src="{{ insertImage('images/touchButton11.png') }}" width="40" height="40" onclick="changeControl('Button 11', 'touchButton', '11');" />
					</div>
					<div id="touchButton12">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconButtonDropZone(this, '12')" onclick="changeControl('Button 12', 'touchButton', '12');" />
						<img src="{{ insertImage('images/touchButton12.png') }}" width="40" height="40" onclick="changeControl('Button 12', 'touchButton', '12');" />
					</div>
					<div id="knob3">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '3')" onclick="changeControl('Knob 3', 'knob', '3');" />
						<img src="{{ insertImage('images/knob3.png') }}" width="39" height="39" onclick="changeControl('Knob 3', 'knob', '3');" />
					</div>
					<div id="knob6">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconKnobDropZone(this, '6')" onclick="changeControl('Knob 6', 'knob', '6');" />
						<img src="{{ insertImage('images/knob6.png') }}" width="39" height="39" onclick="changeControl('Knob 6', 'knob', '6');"/>
					</div>
					<div id="ledButton1">
						<img src="{{ insertImage('images/ledButton1.png') }}" width="33" height="33" onclick="changeControl('1', 'ledButton', '7');" />
					</div>
					<div id="ledButton2">
						<img src="{{ insertImage('images/ledButton2.png') }}" width="33" height="33" onclick="changeControl('2', 'ledButton', '8');" />
					</div>
					<div id="ledButton3">
						<img src="{{ insertImage('images/ledButton3.png') }}" width="33" height="33" onclick="changeControl('3', 'ledButton', '9');" />
					</div>
					<div id="ledButton4">
						<img src="{{ insertImage('images/ledButton4.png') }}" width="33" height="33" onclick="changeControl('4', 'ledButton', '10');" />
					</div>
					<div id="ledButton5">
						<img src="{{ insertImage('images/ledButton5.png') }}" width="33" height="33" onclick="changeControl('5', 'ledButton', '11');" />
					</div>
					<div id="ledButton6">
						<img src="{{ insertImage('images/ledButton6.png') }}" width="33" height="33" onclick="changeControl('6', 'ledButton', '12');" />
					</div>
					<div id="ledButton7">
						<img src="{{ insertImage('images/ledButton7.png') }}" width="33" height="33" onclick="changeControl('7', 'ledButton', '13');" />
					</div>
					<div id="ledButton8">
						<img src="{{ insertImage('images/ledButton8.png') }}" width="33" height="33" onclick="changeControl('8', 'ledButton', '14');" />
					</div>
					<div id="ledButtonO">
						<img src="{{ insertImage('images/ledButtonO.png') }}" width="46" height="46" onclick="changeControl('O', 'ledButton', '15');" />
					</div>
					<div id="ledButtonReturn">
						<img src="{{ insertImage('images/ledButtonReturn.png') }}" width="45" height="46" onclick="changeControl('Return', 'ledButton', '18');" />
					</div>
					<div id="ledButtonA">
						<img src="{{ insertImage('images/ledButtonA.png') }}" width="47" height="46" onclick="changeControl('A', 'ledButton', '21');" />
					</div>
					<div id="ledButtonB">
						<img src="{{ insertImage('images/ledButtonB.png') }}" width="46" height="46" onclick="changeControl('B', 'ledButton', '24');" />
					</div>
					<div id="jogWheelTop">
						<img src="{{ insertImage('images/jogWheelTop.png') }}" width="135" height="27" onclick="changeControl('Jog Wheel', 'jogWheel', '1');" />
					</div>
					<div id="jogWheelLeft">
						<img src="{{ insertImage('images/jogWheelLeft.png') }}" width="28" height="107" onclick="changeControl('Jog Wheel', 'jogWheel', '1');" />
					</div>
					<div id="wheelScreen1">
						<input class="touchButtonDropZone" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconWheelScreenDropZone(this, '1')" onclick="changeControl('Wheel Screen', 'wheelScreen', '1');" />
						<img src="{{ insertImage('images/wheelScreen1.png') }}" width="81" height="82" border="0" style="border-radius: 50%;" onclick="changeControl('Wheel Screen', 'wheelScreen', '1');" />
					</div>
					<div id="jogWheelRight">
						<img src="{{ insertImage('images/jogWheelRight.png') }}" width="26" height="107" onclick="changeControl('Jog Wheel', 'jogWheel', '1');" />
					</div>
					<div id="ledButtonUndo">
						<img src="{{ insertImage('images/ledButtonUndo.png') }}" width="46" height="46" onclick="changeControl('Undo', 'ledButton', '16');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonSave">
						<img src="{{ insertImage('images/ledButtonSave.png') }}" width="45" height="46" onclick="changeControl('Save', 'ledButton', '19');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonC">
						<img src="{{ insertImage('images/ledButtonC.png') }}" width="47" height="46" onclick="changeControl('C', 'ledButton', '22');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonD">
						<img src="{{ insertImage('images/ledButtonD.png') }}" width="46" height="46" onclick="changeControl('D', 'ledButton', '25');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonKeyboard">
						<img src="{{ insertImage('images/ledButtonKeyboard.png') }}" width="46" height="46" onclick="changeControl('Keyboard', 'ledButton', '17');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonLeftFn">
						<img src="{{ insertImage('images/ledButtonLeftFn.png') }}" width="45" height="46" onclick="changeControl('Fn (Left)', 'ledButton', '20');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonRightFn">
						<img src="{{ insertImage('images/ledButtonRightFn.png') }}" width="47" height="46" onclick="changeControl('Fn (Left)', 'ledButton', '23');" style="cursor: pointer;" />
					</div>
					<div id="ledButtonE">
						<img src="{{ insertImage('images/ledButtonE.png') }}" width="46" height="46" onclick="changeControl('E', 'ledButton', '26');" style="cursor: pointer;" />
					</div>
					<div id="jogWheelBottom">
						<img src="{{ insertImage('images/jogWheelBottom.png') }}" width="81" height="25" onclick="changeControl('Jog Wheel', 'jogWheel', '1');" style="cursor: pointer;" />
					</div>
				</div>
			</th>
			<th style="text-align:top; padding-top: 20px;">

				<p style="text-align: left; padding-left:20px; font-size:16px; margin: 0px;">
					<strong>Selected Control:</strong> <span id="label" style="font-weight: normal;">Loading...</span>
				</p>
				<div id="loupedeckGroupControls" class="uiItem">
					<table class="loupedeck" style="height: 526px;" id="noLoupedeck">
						<tr>
							<th>
								<p style="font-size: 12px; font-weight: normal;"><strong>Store settings on Flash Drive</strong> is enabled, but no Loupedeck CT is detected.</p>
								<p style="font-size: 12px; font-weight: normal;">Please connect your Loupedeck CT to allow configuration.</p>
							</th>
						</tr>
					</table>
					<table class="loupedeck" style="height: 526px; display: none;" id="yesLoupedeck">
						<!-- PRESS ACTION, LED COLOR & VIBRATE: -->
						<tr id="pressActionA">
							<th width="229px">Press Action:</th>
							<th width="229px" id="ledColorA">LED Color:</th>
							<th width="229px" id="vibrateA">Vibrate When Pressed:</th>
						</tr>
						<tr id="pressActionB">
							<td width="229px"><input type="text" id="press_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px" id="ledColorB">
								<div>
									<input id="color" class="loupedeckActionTextbox jscolor {hash:true, borderColor:'#FFF', insetColor:'#FFF', backgroundColor:'#666'}" onchange="updateColor()" value="">
								</div>
							</td>
							<td width="229px" id="vibrateB">
								<select id="vibrate" style="width: 210px;" onchange="updateVibrate()">
									<option value="">None</option>
									{%
									for id, label in pairs(vibrationIndex) do
									%}
									<option value="{{id}}">{{label}}</option>
									{%
									end
									%}
								</select>
							</td>
						</tr>
						<tr id="pressActionC">
							<td width="229px"><a id="press_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('pressAction')">{{ i18n("select") }}</a> <a id="press_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('pressAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerA">
							<td>
								</br>
							</td>
						</tr>

						<!-- KNOB LEFT & RIGHT: -->
						<tr id="knobA">
							<th width="229px">Turn Left Action:</th>
							<th width="229px">Turn Right Action:</th>
						</tr>
						<tr id="knobB">
							<td width="229px"><input type="text" id="left_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="right_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="knobC">
							<td width="229px"><a id="left_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('leftAction')">{{ i18n("select") }}</a> <a id="left_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('leftAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a id="right_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('rightAction')">{{ i18n("select") }}</a> <a id="right_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('rightAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerB">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL UP & DOWN : -->
						<tr id="touchWheelA">
							<th width="229px">Slide Up Action:</th>
							<th width="229px">Slide Down Action:</th>
						</tr>
						<tr id="touchWheelB">
							<td width="229px"><input type="text" id="up_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="down_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelC">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('upAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('upAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('downAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('downAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerC">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL LEFT & RIGHT : -->
						<tr id="touchWheelD">
							<th width="229px">Slide Left Action:</th>
							<th width="229px">Slide Right Action:</th>
						</tr>
						<tr id="touchWheelE">
							<td width="229px"><input type="text" id="left_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="right_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelF">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('leftAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('leftAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('rightAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('rightAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerD">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL DOUBLE TAP & TWO FINGER TAP : -->
						<tr id="touchWheelG">
							<th width="229px">Double Tap:</th>
							<th width="229px">Two Finger Tap:</th>
						</tr>
						<tr id="touchWheelH">
							<td width="229px"><input type="text" id="double_tap_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="two_finger_touch_action" class="loupedeckActionTextbox" value="" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelI">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('doubleTapAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('doubleTapAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('twoFingerTapAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('twoFingerTapAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerE">
							<td>
								</br>
							</td>
						</tr>

						<!-- ICON: -->
						<tr id="iconA">
							<th width="229px">Image Drop Zone:</th>
							<th width="229px" id="iconLabelHeading">Text Label:</th>
						</tr>
						<tr id="iconB">
							<td width="229px">
								<div id="iconDropZone" class="dropzone{{ class }}" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
									<div id="iconDropZonePreview" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
										<p style="padding-top: 13px;">icon</p>
									</div>
									<input id="iconDropZoneInput" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconDropZone(this)" onclick="pressIconDropZone()" />
								</div>
							</td>
							<td width="229px" style="vertical-align: top;">
								<textarea id="iconLabel" class="loupedeckActionTextbox" style="resize: none;" rows="5" cols="5" placeholder="{{ i18n("none") }}" onchange="updateIconLabel()"></textarea>
							</td>
						</tr>
						<tr id="iconC">
							<th width="229px" id="buttonResolution"><i style="color: #FFFFFF; padding-left: 16px;">90 x 90 pixels</i></th>
							<th width="229px" id="sideResolution"><i style="color: #FFFFFF; padding-left: 14px;">60 x 270 pixels</i></th>
							<th width="229px" id="wheelResolution"><i style="color: #FFFFFF; padding-left: 10px;">240 x 240 pixels</i></th>
							<th width="229px" id="knobResolution"><i style="color: #FFFFFF; padding-left: 16px;">90 x 60 pixels</i></th>
							<th width="229px">
								<a href="#" class="button loupedeckActionButton" onclick="iconHistory()">History</a> <a href="#" class="button loupedeckActionButton" onclick="clearIcon()">{{ i18n("clear") }}</a>
							</th>
						</tr>
						<tr>
							<th>
								<a href="#" class="bottomButton" onclick="copyControlToAllBanks()">Copy Control to All Banks</a>
							</th>
							<th>
								<a href="#" class="bottomButton" onclick="resetControl()">Reset Control</a>
							</th>
						</tr>

					</table>
				</div>
			</th>
		</tr>
	</thead>
</table>

<table>
	<tr>
		<th style="height: 10px;"></th>
	</tr>
	<tr>
		<th style="width: 10px;"></th>
		<th>
			<a href="#" class="bottomButton" onclick="resetEverything()">Reset Everything</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="resetApplication()">Reset Application</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="resetBank()">Reset Bank</a>
		</th>
	</tr>
	<tr>
		<th style="width: 10px;"></th>
		<th>
			<a href="#" class="bottomButton" onclick="copyApplication()">Copy Application</a>
		</th>
		<th>
			<a href="#" class="bottomButton" onclick="copyBank()">Copy Bank</a>
		</th>
	</tr>
</table>

<input type="hidden" id="selectedControl" value="{{ lastSelectedControl }}">
<input type="hidden" id="id" value="{{ lastID }}">
<input type="hidden" id="controlType" value="{{ lastControlType }}">

<script>
	// Update UI on initial load:
	changeControl("{{ lastSelectedControl }}", "{{ lastControlType }}", "{{ lastID }}");
</script>