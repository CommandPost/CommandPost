<script>{(js/jscolor.js)}</script>
<style>{(css/loupedeck.css)}</style>
<script>
	function changeColor(value) {
		document.getElementById('color').jscolor.fromString(value);
	}

	function updateApplicationAndBank() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateApplicationAndBank",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function iconHistory() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "iconHistory",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('color').jscolor.toString(),
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearIcon() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "clearIcon",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('color').jscolor.toString(),
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateBankLabel() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateBankLabel",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					bankLabel: document.getElementById("bankLabel").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeControl(label, controlType, id) {
		document.getElementById("label").innerHTML = label;

		// -------------------------------------------------
		// KNOB:
		// -------------------------------------------------
		if (controlType == "knob") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "table";
			document.getElementById("knobB").style.display = "table";
			document.getElementById("knobC").style.display = "table";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "none";
			document.getElementById("iconB").style.display = "none";
			document.getElementById("iconC").style.display = "none";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";
		}

		// -------------------------------------------------
		// TOUCH BUTTON:
		// -------------------------------------------------
		if (controlType == "touchButton") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "block";
			document.getElementById("sideResolution").style.display = "none";
			document.getElementById("wheelResolution").style.display = "none";
		}

		// -------------------------------------------------
		// LED BUTTON:
		// -------------------------------------------------
		if (controlType == "ledButton") {
			document.getElementById("spacerA").style.display = "block";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "table";
			document.getElementById("pressActionB").style.display = "table";
			document.getElementById("pressActionC").style.display = "table";

			document.getElementById("iconA").style.display = "none";
			document.getElementById("iconB").style.display = "none";
			document.getElementById("iconC").style.display = "none";

			document.getElementById("ledColorA").style.display = "block";
			document.getElementById("ledColorB").style.display = "block";
		}

		// -------------------------------------------------
		// LEFT/RIGHT SCREENS:
		// -------------------------------------------------
		if (controlType == "sideScreen") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "block";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "block";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "block";
			document.getElementById("touchWheelB").style.display = "block";
			document.getElementById("touchWheelC").style.display = "block";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";

			document.getElementById("touchWheelG").style.display = "block";
			document.getElementById("touchWheelH").style.display = "block";
			document.getElementById("touchWheelI").style.display = "block";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "none";
			document.getElementById("sideResolution").style.display = "block";
			document.getElementById("wheelResolution").style.display = "none";
		}

		// -------------------------------------------------
		// JOG WHEEL:
		// -------------------------------------------------
		if (controlType == "jogWheel") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "none";
			document.getElementById("spacerD").style.display = "none";
			document.getElementById("spacerE").style.display = "none";

			document.getElementById("knobA").style.display = "table";
			document.getElementById("knobB").style.display = "table";
			document.getElementById("knobC").style.display = "table";

			document.getElementById("touchWheelA").style.display = "none";
			document.getElementById("touchWheelB").style.display = "none";
			document.getElementById("touchWheelC").style.display = "none";
			document.getElementById("touchWheelD").style.display = "none";
			document.getElementById("touchWheelE").style.display = "none";
			document.getElementById("touchWheelF").style.display = "none";
			document.getElementById("touchWheelG").style.display = "none";
			document.getElementById("touchWheelH").style.display = "none";
			document.getElementById("touchWheelI").style.display = "none";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "none";
			document.getElementById("iconB").style.display = "none";
			document.getElementById("iconC").style.display = "none";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";
		}

		// -------------------------------------------------
		// WHEEL SCREEN:
		// -------------------------------------------------
		if (controlType == "wheelScreen") {
			document.getElementById("spacerA").style.display = "none";
			document.getElementById("spacerB").style.display = "none";
			document.getElementById("spacerC").style.display = "block";
			document.getElementById("spacerD").style.display = "block";
			document.getElementById("spacerE").style.display = "block";

			document.getElementById("knobA").style.display = "none";
			document.getElementById("knobB").style.display = "none";
			document.getElementById("knobC").style.display = "none";

			document.getElementById("touchWheelA").style.display = "block";
			document.getElementById("touchWheelB").style.display = "block";
			document.getElementById("touchWheelC").style.display = "block";
			document.getElementById("touchWheelD").style.display = "block";
			document.getElementById("touchWheelE").style.display = "block";
			document.getElementById("touchWheelF").style.display = "block";
			document.getElementById("touchWheelG").style.display = "block";
			document.getElementById("touchWheelH").style.display = "block";
			document.getElementById("touchWheelI").style.display = "block";

			document.getElementById("pressActionA").style.display = "none";
			document.getElementById("pressActionB").style.display = "none";
			document.getElementById("pressActionC").style.display = "none";

			document.getElementById("iconA").style.display = "block";
			document.getElementById("iconB").style.display = "block";
			document.getElementById("iconC").style.display = "block";

			document.getElementById("ledColorA").style.display = "none";
			document.getElementById("ledColorB").style.display = "none";

			document.getElementById("buttonResolution").style.display = "none";
			document.getElementById("sideResolution").style.display = "none";
			document.getElementById("wheelResolution").style.display = "block";
		}

		// -------------------------------------------------
		// Save the selectedControl & ID in a hidden field:
		// -------------------------------------------------
		document.getElementById("selectedControl").value = label;
		document.getElementById("id").value = id;
		document.getElementById("controlType").value = controlType;

		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateUI",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					controlType: controlType,
					id: id,
					selectedControl: label,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function updateColor() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateColor",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					value: document.getElementById('color').jscolor.toString(),
					id: document.getElementById("id").value,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function selectButton(buttonType) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "updateAction",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					id: document.getElementById("id").value,
					buttonType: buttonType,
					controlType: document.getElementById("controlType").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function clearButton(buttonType) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "clearAction",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					buttonType: buttonType,
					controlType: document.getElementById("controlType").value,
					id: document.getElementById("id").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function setIcon(encodedIcon) {
		if (encodedIcon != "") {
			document.getElementById("iconDropZonePreview").innerHTML = "<img src='" + encodedIcon + "'>";
    		document.getElementById("iconDropZone").className = "dropzone dropped";
    	} else {
			document.getElementById("iconDropZonePreview").innerHTML = "<p style=\"padding-top: 13px;\">icon</p>";
			document.getElementById("iconDropZone").className = "dropzone";
    	}
	}

	function pressIconDropZone(groupID, buttonID) {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "iconClicked",
					application: document.getElementById("application").value,
					bank: document.getElementById("bank").value,
					selectedControl: document.getElementById("selectedControl").value,
					controlType: document.getElementById("controlType").value,
					id: document.getElementById("id").value,
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function changeIconDropZone(element) {
		var file = element.files[0];

		element.classList.remove("hover");

		var match = element.accept.split(/, ?/).indexOf(file.type);

		if (element.accept && match == -1) {
			// File type dropped doesn't match the accepted list:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "badExtension",
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}
			return;
		};

		element.classList.add("dropped");

		var reader = new FileReader(file);
		reader.readAsDataURL(file);

		reader.onload = function(e) {
			var data = e.target.result;
			document.getElementById("iconDropZonePreview").innerHTML = '<img src="' + data + '" />';

			// Icon Callback:
			try {
				var result = {
					id: "loupedeckCTPanelCallback",
					params: {
						type: "updateIcon",
						application: document.getElementById("application").value,
						bank: document.getElementById("bank").value,
						selectedControl: document.getElementById("selectedControl").value,
						controlType: document.getElementById("controlType").value,
						id: document.getElementById("id").value,
						icon: data,
					},
				}
				postMessage(result);
			} catch(err) {
				alertErrorMessage(err);
			}

		};
	}

	function importSettings() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "importSettings",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

	function exportSettings() {
		try {
			var result = {
				id: "loupedeckCTPanelCallback",
				params: {
					type: "exportSettings",
				},
			}
			postMessage(result);
		} catch(err) {
			alertErrorMessage(err);
		}
	}

</script>
<table>
	<thead>
		<tr>
			<th style="padding-left: 20px;">
				<a class="button importSettings" href="#" style="font-weight: normal;" onclick="importSettings()">Import Settings</a>
			</th>
			<th style="padding-left: 10px;">
				<a class="button importSettings" href="#" style="font-weight: normal;" onclick="exportSettings()">Export Settings</a>
			</th>
		</tr>
	</thead>
</table>
<hr />
<table style="width: 700px; text-align: left; vertical-align: text-bottom; padding-top: 10px; padding-left: 20px">
	<tr>
		<th style=text-align: left;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("application") }}: </span>
				<select id="application" style="width: 150px;" onchange="updateApplicationAndBank()">
					{%
					for id, label in spairs(apps, function(t,a,b) return t[a] < t[b] end) do
						local selected = ""
						if lastApplication == id then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{id}}">{{label}}</option>
					{% end %}
					<option disabled>──────────</option>
					<option value="Add Application">Add Application</option>
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px;">{{ i18n("bank") }}: </span>
				<select id="bank" style="width: 100px;" onchange="updateApplicationAndBank()">
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}">{{i}}</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) .. "_LeftFn" then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}_LeftFn">{{i}} (Left Fn)</option>
					{% end %}
					<option disabled>──────────</option>
					{%
					for i=1, numberOfBanks do
						local selected = ""
						if lastBank == tostring(i) .. "_RightFn" then
							selected = [[selected=""]]
						end
					%}
					<option {{selected}} value="{{i}}_RightFn">{{i}} (Right Fn)</option>
					{% end %}
				</select>
			</span>
		</th>
		<th style="padding-left: 20px;">
			<span style="font-weight:normal; font-size:13px; padding-left:5px;">{{ i18n("label") }}: </span>
			<input type="text" id="bankLabel" class="loupedeckLabel" value="{{ lastBankLabel }}" onchange="updateBankLabel()" placeholder="{{ i18n("none") }}">
		</th>
	</tr>
</table>

<table>
	<thead>
		<tr>
			<th width="447px">
				<div id="loupedeckCT">
					<div id="body1">
						<img src="{{ insertImage('images/body1.png') }}" width="447" height="52" alt="" />
					</div>
					<div id="body2">
						<img src="{{ insertImage('images/body2.png') }}" width="38" height="225" alt="" />
					</div>
					<div id="knob1">
						<a href="#" onclick="changeControl('Knob 1', 'knob', '1');">
							<img src="{{ insertImage('images/knob1.png') }}" width="39" height="39" alt="" />
						</a>
					</div>
					<div id="body6">
						<img src="{{ insertImage('images/body6.png') }}" width="283" height="15" alt="" />
					</div>
					<div id="knob4">
						<a href="#" onclick="changeControl('Knob 4', 'knob', '4');">
							<img src="{{ insertImage('images/knob4.png') }}" width="39" height="39" alt="" />
						</a>
					</div>
					<div id="body30">
						<img src="{{ insertImage('images/body30.png') }}" width="48" height="225" alt="" />
					</div>
					<div id="body7">
						<img src="{{ insertImage('images/body7.png') }}" width="23" height="158" alt="" />
					</div>
					<div id="leftScreen">
						<a href="#" onclick="changeControl('Left Screen', 'sideScreen', '1');">
							<img src="{{ insertImage('images/leftScreen.png') }}" width="24" height="131" alt="" />
						</a>
					</div>
					<div id="body9">
						<img src="{{ insertImage('images/body9.png') }}" width="6" height="210" alt="" />
					</div>
					<div id="touchButton1">
						<a href="#" onclick="changeControl('Button 1', 'touchButton', '1');">
							<img src="{{ insertImage('images/touchButton1.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="body13">
						<img src="{{ insertImage('images/body13.png') }}" width="5" height="213" alt="" />
					</div>
					<div id="touchButton2">
						<a href="#" onclick="changeControl('Button 2', 'touchButton', '2');">
							<img src="{{ insertImage('images/touchButton2.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="body17">
						<img src="{{ insertImage('images/body17.png') }}" width="5" height="213" alt="" />
					</div>
					<div id="touchButton3">
						<a href="#" onclick="changeControl('Button 3', 'touchButton', '3');">
							<img src="{{ insertImage('images/touchButton3.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="body21">
						<img src="{{ insertImage('images/body21.png') }}" width="6" height="213" alt="" />
					</div>
					<div id="touchButton4">
						<a href="#" onclick="changeControl('Button 4', 'touchButton', '4');">
							<img src="{{ insertImage('images/touchButton4.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="body25">
						<img src="{{ insertImage('images/body25.png') }}" width="7" height="210" alt="" />
					</div>
					<div id="rightScreen">
						<a href="#" onclick="changeControl('Right Screen', 'sideScreen', '2');">
							<img src="{{ insertImage('images/rightScreen.png') }}" width="24" height="131" alt="" />
						</a>
					</div>
					<div id="body26">
						<img src="{{ insertImage('images/body26.png') }}" width="23" height="158" alt="" />
					</div>
					<div id="body3">
						<img src="{{ insertImage('images/body3.png') }}" width="39" height="23" alt="" />
					</div>
					<div id="body27">
						<img src="{{ insertImage('images/body27.png') }}" width="39" height="23" alt="" />
					</div>
					<div id="body10">
						<img src="{{ insertImage('images/body10.png') }}" width="40" height="5" alt="" />
					</div>
					<div id="body14">
						<img src="{{ insertImage('images/body14.png') }}" width="40" height="5" alt="" />
					</div>
					<div id="body18">
						<img src="{{ insertImage('images/body18.png') }}" width="40" height="5" alt="" />
					</div>
					<div id="body22">
						<img src="{{ insertImage('images/body22.png') }}" width="40" height="5" alt="" />
					</div>
					<div id="touchButton5">
						<a href="#" onclick="changeControl('Button 5', 'touchButton', '5');">
							<img src="{{ insertImage('images/touchButton5.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton6">
						<a href="#" onclick="changeControl('Button 6', 'touchButton', '6');">
							<img src="{{ insertImage('images/touchButton6.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton7">
						<a href="#" onclick="changeControl('Button 7', 'touchButton', '7');">
							<img src="{{ insertImage('images/touchButton7.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton8">
						<a href="#" onclick="changeControl('Button 8', 'touchButton', '8');">
							<img src="{{ insertImage('images/touchButton8.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="knob2">
						<a href="#" onclick="changeControl('Knob 2', 'knob', '2');">
							<img src="{{ insertImage('images/knob2.png') }}" width="39" height="38" alt="" />
						</a>
					</div>
					<div id="knob5">
						<a href="#" onclick="changeControl('Knob 5', 'knob', '5');">
							<img src="{{ insertImage('images/knob5.png') }}" width="39" height="38" alt="" />
						</a>
					</div>
					<div id="body4">
						<img src="{{ insertImage('images/body4.png') }}" width="39" height="23" alt="" />
					</div>
					<div id="body11">
						<img src="{{ insertImage('images/body11.png') }}" width="40" height="6" alt="" />
					</div>
					<div id="body15">
						<img src="{{ insertImage('images/body15.png') }}" width="40" height="6" alt="" />
					</div>
					<div id="body19">
						<img src="{{ insertImage('images/body19.png') }}" width="40" height="6" alt="" />
					</div>
					<div id="body23">
						<img src="{{ insertImage('images/body23.png') }}" width="40" height="6" alt="" />
					</div>
					<div id="body28">
						<img src="{{ insertImage('images/body28.png') }}" width="39" height="23" alt="" />
					</div>
					<div id="touchButton9">
						<a href="#" onclick="changeControl('Button 9', 'touchButton', '9');">
							<img src="{{ insertImage('images/touchButton9.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton10">
						<a href="#" onclick="changeControl('Button 10', 'touchButton', '10');">
							<img src="{{ insertImage('images/touchButton10.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton11">
						<a href="#" onclick="changeControl('Button 11', 'touchButton', '11');">
							<img src="{{ insertImage('images/touchButton11.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="touchButton12">
						<a href="#" onclick="changeControl('Button 12', 'touchButton', '12');">
							<img src="{{ insertImage('images/touchButton12.png') }}" width="40" height="40" alt="" />
						</a>
					</div>
					<div id="knob3">
						<a href="#" onclick="changeControl('Knob 3', 'knob', '3');">
							<img src="{{ insertImage('images/knob3.png') }}" width="39" height="39" alt="" />
						</a>
					</div>
					<div id="knob6">
						<a href="#" onclick="changeControl('Knob 6', 'knob', '6');">
							<img src="{{ insertImage('images/knob6.png') }}" width="39" height="39" alt="" />
						</a>
					</div>
					<div id="body8">
						<img src="{{ insertImage('images/body8.png') }}" width="24" height="27" alt="" />
					</div>
					<div id="body12">
						<img src="{{ insertImage('images/body12.png') }}" width="40" height="27" alt="" />
					</div>
					<div id="body16">
						<img src="{{ insertImage('images/body16.png') }}" width="40" height="27" alt="" />
					</div>
					<div id="body20">
						<img src="{{ insertImage('images/body20.png') }}" width="40" height="27" alt="" />
					</div>
					<div id="body24">
						<img src="{{ insertImage('images/body24.png') }}" width="40" height="27" alt="" />
					</div>
					<div id="body69">
						<img src="{{ insertImage('images/body69.png') }}" width="24" height="27" alt="" />
					</div>
					<div id="body5">
						<img src="{{ insertImage('images/body5.png') }}" width="39" height="11" alt="" />
					</div>
					<div id="body29">
						<img src="{{ insertImage('images/body29.png') }}" width="39" height="11" alt="" />
					</div>
					<div id="body31">
						<img src="{{ insertImage('images/body31.png') }}" width="3" height="52" alt="" />
					</div>
					<div id="ledButton1">
						<a href="#" onclick="changeControl('1', 'ledButton', '7');">
							<img src="{{ insertImage('images/ledButton1.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body33">
						<img src="{{ insertImage('images/body33.png') }}" width="13" height="52" alt="" />
					</div>
					<div id="ledButton2">
						<a href="#" onclick="changeControl('2', 'ledButton', '8');">
							<img src="{{ insertImage('images/ledButton2.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body35">
						<img src="{{ insertImage('images/body35.png') }}" width="4" height="52" alt="" />
					</div>
					<div id="body36">
						<img src="{{ insertImage('images/body36.png') }}" width="3" height="257" alt="" />
					</div>
					<div id="ledButton3">
						<a href="#" onclick="changeControl('3', 'ledButton', '9');">
							<img src="{{ insertImage('images/ledButton3.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body38">
						<img src="{{ insertImage('images/body38.png') }}" width="4" height="55" alt="" />
					</div>
					<div id="body39">
						<img src="{{ insertImage('images/body39.png') }}" width="4" height="55" alt="" />
					</div>
					<div id="ledButton4">
						<a href="#" onclick="changeControl('4', 'ledButton', '10');">
							<img src="{{ insertImage('images/ledButton4.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body41">
						<img src="{{ insertImage('images/body41.png') }}" width="3" height="55" alt="" />
					</div>
					<div id="body42">
						<img src="{{ insertImage('images/body42.png') }}" width="5" height="55" alt="" />
					</div>
					<div id="ledButton5">
						<a href="#" onclick="changeControl('5', 'ledButton', '11');">
							<img src="{{ insertImage('images/ledButton5.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body44">
						<img src="{{ insertImage('images/body44.png') }}" width="2" height="55" alt="" />
					</div>
					<div id="body45">
						<img src="{{ insertImage('images/body45.png') }}" width="5" height="55" alt="" />
					</div>
					<div id="ledButton6">
						<a href="#" onclick="changeControl('6', 'ledButton', '12');">
							<img src="{{ insertImage('images/ledButton6.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body47">
						<img src="{{ insertImage('images/body47.png') }}" width="2" height="257" alt="" />
					</div>
					<div id="body48">
						<img src="{{ insertImage('images/body48.png') }}" width="4" height="52" alt="" />
					</div>
					<div id="ledButton7">
						<a href="#" onclick="changeControl('7', 'ledButton', '13');">
							<img src="{{ insertImage('images/ledButton7.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body50">
						<img src="{{ insertImage('images/body50.png') }}" width="13" height="52" alt="" />
					</div>
					<div id="ledButton8">
						<a href="#" onclick="changeControl('8', 'ledButton', '14');">
							<img src="{{ insertImage('images/ledButton8.png') }}" width="33" height="33" alt="" />
						</a>
					</div>
					<div id="body52">
						<img src="{{ insertImage('images/body52.png') }}" width="3" height="52" alt="" />
					</div>
					<div id="body32">
						<img src="{{ insertImage('images/body32.png') }}" width="33" height="19" alt="" />
					</div>
					<div id="body34">
						<img src="{{ insertImage('images/body34.png') }}" width="33" height="19" alt="" />
					</div>
					<div id="body37">
						<img src="{{ insertImage('images/body37.png') }}" width="33" height="22" alt="" />
					</div>
					<div id="body40">
						<img src="{{ insertImage('images/body40.png') }}" width="33" height="22" alt="" />
					</div>
					<div id="body43">
						<img src="{{ insertImage('images/body43.png') }}" width="33" height="22" alt="" />
					</div>
					<div id="body46">
						<img src="{{ insertImage('images/body46.png') }}" width="33" height="22" alt="" />
					</div>
					<div id="body49">
						<img src="{{ insertImage('images/body49.png') }}" width="33" height="19" alt="" />
					</div>
					<div id="body51">
						<img src="{{ insertImage('images/body51.png') }}" width="33" height="19" alt="" />
					</div>
					<div id="body53">
						<img src="{{ insertImage('images/body53.png') }}" width="37" height="205" alt="" />
					</div>
					<div id="ledButtonO">
						<a href="#" onclick="changeControl('O', 'ledButton', '15');">
							<img src="{{ insertImage('images/ledButtonO.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="body55">
						<img src="{{ insertImage('images/body55.png') }}" width="2" height="205" alt="" />
					</div>
					<div id="ledButtonReturn">
						<a href="#" onclick="changeControl('Return', 'ledButton', '18');">
							<img src="{{ insertImage('images/ledButtonReturn.png') }}" width="45" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonA">
						<a href="#" onclick="changeControl('A', 'ledButton', '21');">
							<img src="{{ insertImage('images/ledButtonA.png') }}" width="47" height="46" alt="" />
						</a>
					</div>
					<div id="body71">
						<img src="{{ insertImage('images/body71.png') }}" width="1" height="205" alt="" />
					</div>
					<div id="ledButtonB">
						<a href="#" onclick="changeControl('B', 'ledButton', '24');">
							<img src="{{ insertImage('images/ledButtonB.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="body70">
						<img src="{{ insertImage('images/body70.png') }}" width="47" height="205" alt="" />
					</div>
					<div id="body60">
						<img src="{{ insertImage('images/body60.png') }}" width="18" height="202" alt="" />
					</div>
					<div id="jogWheel">
						<a href="#" onclick="changeControl('Jog Wheel', 'jogWheel', '1');">
							<img src="{{ insertImage('images/jogWheel.png') }}" width="135" height="27" alt="" />
						</a>
					</div>
					<div id="body62">
						<img src="{{ insertImage('images/body62.png') }}" width="18" height="202" alt="" />
					</div>
					<div id="jogWheel093">
						<a href="#" onclick="changeControl('Jog Wheel', 'jogWheel', '1');">
							<img src="{{ insertImage('images/jogWheel-93.png') }}" width="28" height="107" alt="" />
						</a>
					</div>
					<div id="wheelScreen">
						<a href="#" onclick="changeControl('Wheel Screen', 'wheelScreen', '1');">
							<img src="{{ insertImage('images/wheelScreen.png') }}" width="81" height="82" border="0" alt="" />
						</a>
					</div>
					<div id="jogWheel095">
						<a href="#" onclick="changeControl('Jog Wheel', 'jogWheel', '1');">
							<img src="{{ insertImage('images/jogWheel-95.png') }}" width="26" height="107" alt="" />
						</a>
					</div>
					<div id="body54">
						<img src="{{ insertImage('images/body54.png') }}" width="46" height="1" alt="" />
					</div>
					<div id="body56">
						<img src="{{ insertImage('images/body56.png') }}" width="45" height="1" alt="" />
					</div>
					<div id="body63">
						<img src="{{ insertImage('images/body63.png') }}" width="47" height="1" alt="" />
					</div>
					<div id="body64">
						<img src="{{ insertImage('images/body64.png') }}" width="46" height="1" alt="" />
					</div>
					<div id="ledButtonUndo">
						<a href="#" onclick="changeControl('Undo', 'ledButton', '16');">
							<img src="{{ insertImage('images/ledButtonUndo.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonSave">
						<a href="#" onclick="changeControl('Save', 'ledButton', '19');">
							<img src="{{ insertImage('images/ledButtonSave.png') }}" width="45" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonC">
						<a href="#" onclick="changeControl('C', 'ledButton', '22');">
							<img src="{{ insertImage('images/ledButtonC.png') }}" width="47" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonD">
						<a href="#" onclick="changeControl('D', 'ledButton', '25');">
							<img src="{{ insertImage('images/ledButtonD.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="body56104">
						<img src="{{ insertImage('images/body56-104.png') }}" width="46" height="1" alt="" />
					</div>
					<div id="body57">
						<img src="{{ insertImage('images/body57.png') }}" width="45" height="1" alt="" />
					</div>
					<div id="body65">
						<img src="{{ insertImage('images/body65.png') }}" width="47" height="1" alt="" />
					</div>
					<div id="body66">
						<img src="{{ insertImage('images/body66.png') }}" width="46" height="1" alt="" />
					</div>
					<div id="ledButtonKeyboard">
						<a href="#" onclick="changeControl('Keyboard', 'ledButton', '17');">
							<img src="{{ insertImage('images/ledButtonKeyboard.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonLeftFn">
						<a href="#" onclick="changeControl('Fn (Left)', 'ledButton', '20');">
							<img src="{{ insertImage('images/ledButtonLeftFn.png') }}" width="45" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonRightFn">
						<a href="#" onclick="changeControl('Fn (Left)', 'ledButton', '23');">
							<img src="{{ insertImage('images/ledButtonRightFn.png') }}" width="47" height="46" alt="" />
						</a>
					</div>
					<div id="ledButtonE">
						<a href="#" onclick="changeControl('E', 'ledButton', '26');">
							<img src="{{ insertImage('images/ledButtonE.png') }}" width="46" height="46" alt="" />
						</a>
					</div>
					<div id="jogWheel112">
						<a href="#" onclick="changeControl('Jog Wheel', 'jogWheel', '1');">
							<img src="{{ insertImage('images/jogWheel-112.png') }}" width="81" height="25" alt="" />
						</a>
					</div>
					<div id="body61">
						<img src="{{ insertImage('images/body61.png') }}" width="135" height="68" alt="" />
					</div>
					<div id="body58">
						<img src="{{ insertImage('images/body58.png') }}" width="46" height="65" alt="" />
					</div>
					<div id="body59">
						<img src="{{ insertImage('images/body59.png') }}" width="45" height="65" alt="" />
					</div>
					<div id="body67">
						<img src="{{ insertImage('images/body67.png') }}" width="47" height="65" alt="" />
					</div>
					<div id="body68">
						<img src="{{ insertImage('images/body68.png') }}" width="46" height="65" alt="" />
					</div>
				</div>
			</th>
			<th style="text-align:top; padding-top: 20px;">

				<p style="text-align: left; padding-left:20px; font-size:16px; margin: 0px;">
					<strong>Selected Control:</strong> <span id="label" style="font-weight: normal;">{{ lastSelectedControl }}</span>
				</p>
				<div id="loupedeckGroupControls" class="uiItem">
					<table class="loupedeck" style="height: 500px;">

						<!-- PRESS ACTION & LED COLOR: -->
						<tr id="pressActionA">
							<th width="229px">Press Action:</th>
							<th width="229px" id="ledColorA">LED Color:</th>
						</tr>
						<tr id="pressActionB">
							<td width="229px"><input type="text" id="press_action" class="loupedeckActionTextbox" value="{{ lastPressValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px" id="ledColorB">
								<div>
									<input id="color" class="loupedeckActionTextbox jscolor {hash:true, borderColor:'#FFF', insetColor:'#FFF', backgroundColor:'#666'}" onchange="updateColor()" value="{{ lastColorValue }}">
								</div>
							</td>
						</tr>
						<tr id="pressActionC">
							<td width="229px"><a id="press_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('pressAction')">{{ i18n("select") }}</a> <a id="press_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('pressAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerA">
							<td>
								</br>
							</td>
						</tr>

						<!-- KNOB LEFT & RIGHT: -->
						<tr id="knobA">
							<th width="229px">Turn Left Action:</th>
							<th width="229px">Turn Right Action:</th>
						</tr>
						<tr id="knobB">
							<td width="229px"><input type="text" id="left_action" class="loupedeckActionTextbox" value="{{ lastLeftValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="right_action" class="loupedeckActionTextbox" value="{{ lastRightValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="knobC">
							<td width="229px"><a id="left_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('leftAction')">{{ i18n("select") }}</a> <a id="left_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('leftAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a id="right_actionButton" href="#" class="button loupedeckActionButton" onclick="selectButton('rightAction')">{{ i18n("select") }}</a> <a id="right_clearButton" href="#" class="button loupedeckActionButton" onclick="clearButton('rightAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerB">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL UP & DOWN : -->
						<tr id="touchWheelA">
							<th width="229px">Slide Up Action:</th>
							<th width="229px">Slide Down Action:</th>
						</tr>
						<tr id="touchWheelB">
							<td width="229px"><input type="text" id="up_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchUpValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="down_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchDownValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelC">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('upAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('upAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('downAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('downAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerC">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL LEFT & RIGHT : -->
						<tr id="touchWheelD">
							<th width="229px">Slide Left Action:</th>
							<th width="229px">Slide Right Action:</th>
						</tr>
						<tr id="touchWheelE">
							<td width="229px"><input type="text" id="left_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchLeftValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="right_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchRightValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelF">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('leftAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('leftAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('rightAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('rightAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerD">
							<td>
								</br>
							</td>
						</tr>

						<!-- TOUCH WHEEL DOUBLE TAP & TWO FINGER TAP : -->
						<tr id="touchWheelG">
							<th width="229px">Double Tap:</th>
							<th width="229px">Two Finger Tap:</th>
						</tr>
						<tr id="touchWheelH">
							<td width="229px"><input type="text" id="double_tap_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchDoubleTapValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
							<td width="229px"><input type="text" id="two_finger_touch_action" class="loupedeckActionTextbox" value="{{ lastTouchTwoFingerValue }}" disabled="" placeholder="{{ i18n("none") }}"></td>
						</tr>
						<tr id="touchWheelI">
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('doubleTapAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('doubleTapAction')">{{ i18n("clear") }}</a></td>
							<td width="229px"><a href="#" class="button loupedeckActionButton" onclick="selectButton('twoFingerTapAction')">{{ i18n("select") }}</a> <a href="#" class="button loupedeckActionButton" onclick="clearButton('twoFingerTapAction')">{{ i18n("clear") }}</a></td>
						</tr>

						<!-- SPACER: -->
						<tr id="spacerE">
							<td>
								</br>
							</td>
						</tr>

						<!-- ICON: -->
						<tr id="iconA">
							<th width="229px">Image Drop Zone:</th>
						</tr>
						<tr id="iconB">
							<td width="229px">
								<div id="iconDropZone" class="dropzone{{ class }}" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
									<div id="iconDropZonePreview" ondragover="this.classList.add('hover')" ondragleave="this.classList.remove('hover')">
										{%

											if lastEncodedIcon then
										%}
										<img src="{{ lastEncodedIcon }}" />
										{%
											else
										%}
											<p style="padding-top: 13px;">icon</p>
										{%
											end
										%}
									</div>
									<input id="iconDropZoneInput" type="file" accept="image/png, image/gif, image/jpeg, image/tiff" onchange="changeIconDropZone(this)" onclick="pressIconDropZone()" />
								</div>
							</td>
							<td width="229px">

							</td>
						</tr>
						<tr id="iconC">
							<th width="229px" id="buttonResolution"><i style="color: #FFFFFF; padding-left: 16px;">90 x 90 pixels</i></th>
							<th width="229px" id="sideResolution"><i style="color: #FFFFFF; padding-left: 14px;">60 x 270 pixels</i></th>
							<th width="229px" id="wheelResolution"><i style="color: #FFFFFF; padding-left: 10px;">240 x 240 pixels</i></th>
							<th width="229px">
								<a href="#" class="button loupedeckActionButton" onclick="iconHistory()">History</a> <a href="#" class="button loupedeckActionButton" onclick="clearIcon()">{{ i18n("clear") }}</a>
							</th>
						</tr>
					</table>
				</div>
			</th>
		</tr>
	</thead>
</table>

<input type="hidden" id="selectedControl" value="{{ lastSelectedControl }}">
<input type="hidden" id="id" value="{{ lastID }}">
<input type="hidden" id="controlType" value="{{ lastControlType }}">



{%
	local textVisibility = "none"
	local buttonVisibility = "none"
	if not lastIsButton then
		textVisibility = "block"
		buttonVisibility = "inline-block"
	end
%}

<script>
	// Update UI on initial load:
	changeControl("{{ lastSelectedControl }}", "{{ lastControlType }}", "{{ lastID }}");
</script>